---
description: 
globs: 
alwaysApply: true
---
# üìÅ Contexte de projet : FlexPress Core

## üí° Objectif

FlexPress-Core est une base WordPress dockeris√©e, modulaire et orient√©e DevOps. Le code et les configurations doivent respecter une logique d‚Äô**environnements propres**, de **modularit√© par services**, et de **s√©curit√© d√®s la conception**.

---

## üß± Architecture du projet

flexpress-core/
‚îú‚îÄ‚îÄ docker-compose.yml # Orchestration principale
‚îú‚îÄ‚îÄ Dockerfile # Image WordPress customis√©e
‚îú‚îÄ‚îÄ .env # Variables d‚Äôenvironnement (jamais versionn√©es)
‚îú‚îÄ‚îÄ config/ # Configuration PHP, Apache, etc.
‚îú‚îÄ‚îÄ wordpress/wp-content/ # Personnalisations WordPress (plugins/themes)
‚îú‚îÄ‚îÄ mysql/data/ # Persistance base de donn√©es
‚îú‚îÄ‚îÄ extensions/ # Services optionnels activables (Traefik, Redis‚Ä¶)
‚îú‚îÄ‚îÄ scripts/ # Automatisations WP-CLI et Shell
‚îú‚îÄ‚îÄ docs/ # Documentation projet (README, changelog‚Ä¶)
‚îî‚îÄ‚îÄ Makefile # Commandes DevOps simplifi√©es


---

## ‚úÖ Style & bonnes pratiques attendues

- üîê Toujours utiliser des **variables d‚Äôenvironnement** pour les mots de passe et secrets
- üì¶ Favoriser **la modularit√©** (fichiers `.yml` s√©par√©s dans `extensions/`)
- üß™ Ajouter des **healthchecks** dans les services critiques
- üß© Structure claire et extensible, sans duplication
- üí¨ Tous les fichiers critiques (Dockerfile, `docker-compose.yml`, etc.) doivent √™tre **comment√©s**
- üßò Les scripts doivent √™tre **idempotents** : relancer plusieurs fois ne doit pas casser le setup
- üßº Pas de logique m√©tier dans `Dockerfile`, mais bien dans les scripts d√©di√©s
- üìÑ Tout nouveau service Docker doit avoir une **doc associ√©e** dans `docs/ARCHITECTURE.md`
- üßô Tous les plugins WordPress par d√©faut sont d√©sactiv√©s sauf exception document√©e

---

## üß≠ R√®gles d‚Äôassistance Cursor AI

- Si je travaille dans `docker-compose.yml` :
  > proposer une structure lisible, indenter proprement, sugg√©rer des `depends_on`, `healthcheck`, `labels` traefik si contexte disponible

- Si je travaille dans `Dockerfile` :
  > proposer une image l√©g√®re (bas√©e sur `wordpress:php8.X-fpm-alpine` de pr√©f√©rence) et s√©curis√©e, √©viter RUN cha√Æn√©s trop longs

- Si je travaille dans `scripts/` :
  > proposer des scripts WP-CLI ou bash simples, comment√©s, avec gestion des erreurs

- Si je travaille dans `docs/` :
  > structurer automatiquement les sections en titres clairs, proposer des exemples concrets, g√©n√©rer du markdown lisible

---

## üîÑ Convention de version

- La version actuelle du projet est : `v1.0.0`
- Respect du [Semantic Versioning 2.0.0](https://semver.org/)
- Chaque mise √† jour doit √™tre refl√©t√©e dans `docs/CHANGELOG.md`

---

## üõ°Ô∏è S√©curit√© & DevOps

- üîê Le mot de passe root MySQL ne doit jamais √™tre cod√© en dur
- üîí Aucun plugin WordPress ne doit √™tre pr√©install√© s‚Äôil n‚Äôest pas open source ou valid√©
- üîÅ Pr√©voir une logique de backup externe (extension ou script recommand√©)
- üîç Utiliser Traefik ou Nginx avec Let‚Äôs Encrypt si `extensions/traefik.yml` est activ√©

---

## ‚úçÔ∏è Signature projet

> Ce projet est maintenu par **Eurin HASH / E-FLEX CLOUD**, dans le cadre du CMS open infra **FlexPress**.  
Tous les modules doivent pouvoir √™tre *d√©ploy√©s, mis √† jour et surveill√©s automatiquement* sur VPS souverain ou h√©bergement cloud priv√©.

lien github :[github](https://github.com/digitaleflex/flexpress-core.git) 

